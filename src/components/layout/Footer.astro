---
// Footer component for J Land Contracting
export interface SocialLink {
  name: string;
  url: string;
  icon: string;
}

export interface FooterLink {
  label: string;
  href: string;
}

export interface Props {
  socialLinks?: SocialLink[];
  footer_company_name?: string;
  footer_company_description?: string;
  footer_address?: string;
  footer_phone?: string;
  footer_email?: string;
  footer_quick_links_title?: string;
  footer_quick_links?: FooterLink[];
  footer_services_title?: string;
  footer_services_links?: FooterLink[];
  footer_newsletter_title?: string;
  footer_newsletter_description?: string;
  footer_newsletter_button?: string;
  footer_copyright?: string;
  footer_link_privacy?: string;
  footer_link_terms?: string;
}

const {
  socialLinks = [],
  footer_company_name = "",
  footer_company_description = "",
  footer_address = "",
  footer_phone = "",
  footer_email = "",
  footer_quick_links_title = "",
  footer_quick_links = [],
  footer_services_title = "",
  footer_services_links = [],
  footer_newsletter_title = "",
  footer_newsletter_description = "",
  footer_newsletter_button = "",
  footer_copyright = "",
  footer_link_privacy = "",
  footer_link_terms = "",
} = Astro.props;
---

<footer class="text-white py-8 sm:py-12" style="background: #262327;">
  <div class="max-w-7xl mx-auto px-4 sm:px-8 lg:px-16">
    <!-- Main Footer Content -->
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12 lg:mb-16"
    >
      <!-- Company Info -->
      <div class="col-span-1">
        <h3
          data-editable="text"
          data-prop={`footer_company_name`}
          class="text-lg sm:text-xl md:text-2xl font-bold mb-3 sm:mb-4"
          style="color: #F8F9FA;"
        >
          {footer_company_name}
        </h3>
        <p
          data-editable="text"
          data-prop={`footer_company_description`}
          class="text-sm sm:text-base leading-5 sm:leading-6"
          style="color: #7D7877;"
        >
          {footer_company_description}
        </p>

        <!-- Contact Icons and Info -->
        <div class="mt-4 space-y-4">
          <div class="flex items-start space-x-4">
            <div class="flex flex-col space-y-4">
              <div
                class="w-4 h-4"
                style="background-image: url('https://static.motiffcontent.com/private/resource/image/1984510688a461b-71b41986-5321-4e52-9f5a-87af90c86ad6.svg'); background-size: cover;"
              >
              </div>
              <div
                class="w-4 h-4"
                style="background-image: url('https://static.motiffcontent.com/private/resource/image/1984510688a28a5-14983036-8018-4d69-868c-4ea7b27e0a3e.svg'); background-size: cover;"
              >
              </div>
              <div
                class="w-4 h-4"
                style="background-image: url('https://static.motiffcontent.com/private/resource/image/1984510688b66a5-131d6f12-db88-465f-9af5-1e155372dd0e.svg'); background-size: cover;"
              >
              </div>
            </div>
            <div class="space-y-1 sm:space-y-2">
              <p
                data-editable="text"
                data-prop={`footer_address`}
                class="text-sm sm:text-base leading-5 sm:leading-6"
                style="color: #7D7877;"
              >
                {footer_address}
              </p>
              <p
                data-editable="text"
                data-prop={`footer_phone`}
                class="text-sm sm:text-base leading-5 sm:leading-6"
                style="color: #7D7877;"
              >
                {footer_phone}
              </p>
              <p
                data-editable="text"
                data-prop={`footer_email`}
                class="text-sm sm:text-base leading-5 sm:leading-6"
                style="color: #7D7877;"
              >
                {footer_email}
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="col-span-1">
        <h4
          data-editable="text"
          data-prop={`footer_quick_links_title`}
          class="text-base sm:text-lg font-semibold mb-4 sm:mb-6"
          style="color: #F8F9FA;"
        >
          {footer_quick_links_title}
        </h4>
        <ul class="space-y-1 sm:space-y-2">
          {
            footer_quick_links.map((link, index) => (
              <li>
                <a
                  href={link.href}
                  class="text-sm sm:text-base leading-5 sm:leading-6 hover:opacity-80"
                  style="color: #7D7877;"
                >
                  <span
                    data-editable="text"
                    data-prop={`footer_quick_links[${index}].label`}
                  >
                    {link.label}
                  </span>
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- Our Services -->
      <div class="col-span-1">
        <h4
          data-editable="text"
          data-prop={`footer_services_title`}
          class="text-base sm:text-lg font-semibold mb-4 sm:mb-6"
          style="color: #F8F9FA;"
        >
          {footer_services_title}
        </h4>
        <ul class="space-y-1 sm:space-y-2">
          {
            footer_services_links.map((link, index) => (
              <li>
                <a
                  href={link.href}
                  class="text-sm sm:text-base leading-5 sm:leading-6 hover:opacity-80"
                  style="color: #7D7877;"
                >
                  <span
                    data-editable="text"
                    data-prop={`footer_services_links[${index}].label`}
                  >
                    {link.label}
                  </span>
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- Newsletter Signup -->
      <div class="col-span-1">
        <h4
          data-editable="text"
          data-prop={`footer_newsletter_title`}
          class="text-base sm:text-lg font-semibold mb-4 sm:mb-6"
          style="color: #F8F9FA;"
        >
          {footer_newsletter_title}
        </h4>
        <p
          data-editable="text"
          data-prop={`footer_newsletter_description`}
          class="text-sm sm:text-base leading-5 sm:leading-6 mb-2 sm:mb-3"
          style="color: #7D7877;"
        >
          {footer_newsletter_description}
        </p>

        <form class="space-y-3">
          <input
            type="email"
            placeholder="Your email address"
            class="w-full px-4 py-2 rounded border text-base leading-6"
            style="background: #F8F9FA; border-color: #C1B9BC; color: #9CA3AF;"
          />
          <button
            type="submit"
            class="w-full px-4 py-2 rounded font-medium text-base leading-6 text-center hover:opacity-90"
            style="background: #FDB813; color: #262327;"
          >
            <span data-editable="text" data-prop={`footer_newsletter_button`}
              >{footer_newsletter_button}</span
            >
          </button>
        </form>
      </div>
    </div>

    <!-- Divider -->
    <div
      class="w-full h-px mb-4"
      style="background-image: url('https://static.motiffcontent.com/private/resource/image/1984510688cecf7-72bbdbbc-0dfb-42a0-8f91-334553dbc989.svg'); background-size: cover;"
    >
    </div>

    <!-- Bottom Footer -->
    <div
      class="flex flex-col md:flex-row justify-between items-center pt-3 sm:pt-4 pb-6 sm:pb-8"
    >
      <p
        data-editable="text"
        data-prop={`footer_copyright`}
        class="text-sm sm:text-base leading-5 sm:leading-6 mb-3 sm:mb-4 md:mb-0"
        style="color: #7D7877;"
      >
        {footer_copyright}
      </p>

      <div class="flex items-center space-x-4">
        <!-- Social Media Icons -->
        <div class="flex space-x-4">
          {
            socialLinks.map((s) => (
              <a
                href={s.url}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={s.name}
                class="w-5 h-5 block hover:opacity-80 transition-opacity"
              >
                <img
                  src={s.icon}
                  alt={s.name}
                  class="w-full h-full object-contain"
                />
              </a>
            ))
          }
        </div>

        <!-- Legal Links -->
        <div
          class="flex items-center space-x-3 sm:space-x-4 ml-0 sm:ml-6 mt-2 sm:mt-0"
        >
          <a
            href="/privacy"
            class="text-sm sm:text-base leading-5 sm:leading-6 hover:opacity-80"
            style="color: #7D7877;"
            ><span data-editable="text" data-prop={`footer_link_privacy`}
              >{footer_link_privacy}</span
            ></a
          >
          <span
            class="text-sm sm:text-base leading-5 sm:leading-6"
            style="color: #7D7877;">â€¢</span
          >
          <a
            href="/terms"
            class="text-sm sm:text-base leading-5 sm:leading-6 hover:opacity-80"
            style="color: #7D7877;"
            ><span data-editable="text" data-prop={`footer_link_terms`}
              >{footer_link_terms}</span
            ></a
          >
        </div>
      </div>
    </div>
  </div>
  <script
    is:inline
    id="eea3332f-7784-4ba4-81d9-36b384371b29"
    type="text/javascript"
  >
    var scr = document.createElement("script");
    scr.src =
      "https://psai.azureedge.net/eea3332f-7784-4ba4-81d9-36b384371b29.js?v=" +
      Date.now();
    document.getElementsByTagName("body")[0].appendChild(scr);
  </script>

  <script
    is:inline
    id="d3e70a27-b93c-4f10-b26f-05b7ea50d243"
    type="text/javascript"
  >
    var scr = document.createElement("script");
    scr.src =
      "https://psai.azureedge.net/d3e70a27-b93c-4f10-b26f-05b7ea50d243.js?v=" +
      Date.now();
    document.getElementsByTagName("body")[0].appendChild(scr);
  </script>

  <script
    is:inline
    id="66e312ca-e6f0-41a6-b057-875a9c3245fa"
    type="text/javascript"
  >
    var scr = document.createElement("script");
    scr.src =
      "https://psai.azureedge.net/66e312ca-e6f0-41a6-b057-875a9c3245fa.js?v=" +
      Date.now();
    document.getElementsByTagName("body")[0].appendChild(scr);
  </script>

  <script is:inline>
    // Central Event Delegate for PSAI Triggers
    document.addEventListener("click", function (e) {
      const trigger = e.target.closest("[data-psai-trigger]");
      if (!trigger) return;

      e.preventDefault();
      const appId = trigger.getAttribute("data-psai-trigger");

      // Find the PSAI launcher associated with this appId
      // PSAI script creates a container with id=appId
      const psaiContainer = document.getElementById(appId);
      if (psaiContainer) {
        const launcher = psaiContainer.querySelector(".psai-app-trigger");
        if (launcher) {
          launcher.click();
          return;
        }
      }

      // Fallback: If script isn't loaded yet or launcher not found,
      // we could show a loading state or retry.
      console.warn("PSAI launcher not found for app:", appId);
    });
  </script>
</footer>
