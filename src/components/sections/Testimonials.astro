---
// Testimonials Component - Two Column Layout
// Refactored to use UI components and Tailwind CSS only

import { Card, Container, CardGrid, ContentBlock } from '../ui/index.js';
import { Layout, SectionHeader, Spacer } from '../ui/index.js';
import { Section } from '../ui/index.js';
import { ProjectGallery, FeaturedTestimonial } from '../ui/index.js';
// Note: Heading requires direct import due to TypeScript compatibility
import Heading from '../ui/display/Heading.astro';

export interface Props {
  images?: any[];
  testimonial?: any;
}

const { images = [], testimonial } = Astro.props;
---

<Section background="dark" padding="sm" style="padding: 0;">
  <Layout 
    variant="two-column"
    leftBackground="dark" 
    rightBackground="light" 
    minHeight="654px"
    leftPadding="lg"
    rightPadding="md"
    gap="lg"
  >
    <!-- Left Column Content -->
    <div slot="left">
      <ContentBlock spacing="md" class="w-full max-w-none sm:max-w-[592px]">
        <Heading level={2} size="3xl" color="white" class="text-[30px] leading-9">
          What Our Clients Say
        </Heading>
        
        <!-- Featured Testimonial -->
        <FeaturedTestimonial 
          quote="Working with JLand Contracting has always been worry free. I have used them for years on every type of roofing issue from storm damage to homes completly destroyed by fire. They have always been on time, extremely professional and turn out a high quality product. This is the only exterior contractor we work with."
          customerName="Mark Owens"
          location="Westminster, MD"
          avatarUrl={testimonial?.avatarURL}
          rating={5}
          variant="default"
        />
        
        <!-- Recent Projects Section -->
        <Spacer size="md" direction="top">
          <Heading level={3} size="lg" color="white" class="text-lg leading-7 mb-4">
            Recent Projects
          </Heading>
          
          <ProjectGallery 
            images={images}
            variant="horizontal"
            imageSize="lg"
            gap="sm"
          />
        </Spacer>
      </ContentBlock>
    </div>
    
    <!-- Right Column Content -->
    <div slot="right">
      <!-- Customer Reviews Header -->
      <Section background="transparent" padding="sm">
        <Container size="md" class="flex justify-center">
          <SectionHeader 
             title="Customer Reviews"
             level={2}
             size="2xl"
             showRating={true}
             rating={4.9}
             totalReviews={124}
             layout="horizontal"
             alignment="left"
             spacing="sm"
           />
        </Container>
      </Section>
      
      <!-- Reviews List -->
      <CardGrid variant="testimonial" columns={1} gap="md" maxWidth="max-w-2xl">
        {/* timeAgo="2 weeks ago" - implement later */}
        <Card 
          variant="review"
          customerName="Jason Chung"
          location="Urbana, MD"
          rating={5}
          serviceType="Roof Replacement"
          timeAgo="3 months ago"
          reviewText="The roof replacement was clean and awesome! It was done in a day and a half! This looks like a company that you can definitely trust and rely on for roof replacement!"
        />
        
        <Card 
          variant="review"
          customerName="Matthew Marcus"
          location="Frederick, MD"
          rating={5}
          serviceType="Commercial Roof"
          timeAgo="6 months ago"
          reviewText="I could not have been happier with the job Danny and JLand Contracting completed for us. He was extremely helpful and friendly. The roof came out fantastic too. Thanks to him we got our roof replacement fully covered by our insurance! Thanks Danny!"
        />
      </CardGrid>
    </div>
  </Layout>
</Section>