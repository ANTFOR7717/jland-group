---
// FAQ Component - Refactored to use Tailwind CSS only
// Complies with mandatory CSS framework requirements

export interface FAQItem {
  question: string;
  answer: string;
}

export interface FAQSection {
  title: string;
  key: string;
  items: FAQItem[];
}

export interface Props {
  heading?: string;
  subtitle?: string;
  cta_text?: string;
  cta_button?: string;
  sections?: FAQSection[];
  class?: string;
}

const {
  heading,
  subtitle,
  cta_text,
  cta_button,
  sections,
  class: className,
  ...rest
} = Astro.props;

import Container from "../ui/layout/Container.astro";
import Section from "../ui/layout/Section.astro";
import Spacer from "../ui/layout/Spacer.astro";
import ContentBlock from "../ui/display/ContentBlock.astro";
import ContentGrid from "../ui/layout/ContentGrid.astro";
import {
  Dropdown,
  SectionHeader,
  DecorativeLine,
  Button,
} from "../ui/index.js";
import Heading from "../ui/display/Heading.astro";
import Text from "../ui/display/Text.astro";
---

<Section
  background="light"
  padding="sm"
  class={`py-8 sm:py-12 ${className}`}
  {...rest}
>
  <Container size="xl">
    <!-- FAQ Container with proper UI components -->
    <ContentBlock
      maxWidth="max-w-6xl"
      class="mx-auto overflow-hidden font-montserrat flex flex-col items-stretch bg-background-light text-lg font-medium gap-2"
    >
      <!-- Header Section -->
      <Spacer size="xl" direction="top">
        <ContentGrid columns={1} padding="lg" class="items-start min-h-11">
          <Heading
            level={1}
            size="3xl"
            class="truncate w-full max-w-lg min-h-9 text-2xl sm:text-3xl md:text-4xl"
          >
            <span data-editable="text" data-prop="faq_heading">{heading}</span>
          </Heading>
        </ContentGrid>
      </Spacer>

      <!-- Decorative Line -->
      <ContentGrid columns={1} padding="lg" class="items-start min-h-1">
        <DecorativeLine variant="primary" width="lg" alignment="left" />
      </ContentGrid>

      <!-- Subtitle -->
      <Spacer size="xs" direction="top">
        <ContentGrid columns={1} padding="lg" class="items-start min-h-6">
          <Text
            variant="body"
            color="secondary"
            class="truncate w-full max-w-2xl min-h-5 text-sm sm:text-base"
          >
            <span data-editable="text" data-prop="faq_subtitle">{subtitle}</span
            >
          </Text>
        </ContentGrid>
      </Spacer>

      <!-- FAQ Sections (dynamic) -->
      <div data-editable="array" data-prop="faq_sections">
        {
          sections.map((section, sectionIndex) => (
            <div data-editable="array-item">
              <Spacer size="lg" direction="top">
                <ContentGrid
                  columns={1}
                  padding="lg"
                  class="items-start min-h-8"
                >
                  <Heading
                    level={3}
                    size="lg"
                    class="truncate w-72 min-h-6 font-semibold text-lg sm:text-xl"
                  >
                    <span data-editable="text" data-prop="title">
                      {section.title}
                    </span>
                  </Heading>
                </ContentGrid>
              </Spacer>
              <Spacer size="xs" direction="top">
                <ContentGrid
                  columns={1}
                  gap="sm"
                  padding="lg"
                  class="flex-col items-stretch"
                >
                  {section.items.map((faq, faqIndex) => (
                    <Dropdown
                      id={`${section.key}-${faqIndex + 1}`}
                      title={faq.question}
                      content={faq.answer}
                      variant="faq"
                      maxWidth="max-w-lg"
                    />
                  ))}
                </ContentGrid>
              </Spacer>
            </div>
          ))
        }
      </div>

      <!-- Contact Us Section -->
      <Spacer size="lg" direction="top">
        <ContentGrid columns={1} padding="lg" class="flex items-center">
          <div class="flex items-center gap-6 ml-auto">
            <Text variant="lead" color="primary" weight="medium">
              <span data-editable="text" data-prop="faq_cta_text"
                >{cta_text}</span
              >
            </Text>
            <Button
              variant="primary"
              size="lg"
              class="min-h-14 w-56 text-white"
            >
              <span data-editable="text" data-prop="faq_cta_button"
                >{cta_button}</span
              >
            </Button>
          </div>
        </ContentGrid>
      </Spacer>
    </ContentBlock>
  </Container>
</Section>
