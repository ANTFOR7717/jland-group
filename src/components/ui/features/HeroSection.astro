---
// HeroSection component for hero layout with video background
// Enhanced for optimal responsiveness and performance
export interface Props {
  backgroundImage?: string;
  videoSrc?: string;
  height?: string;
  fontFamily?: string;
  class?: string;
  priority?: boolean;
}

const { 
  backgroundImage,
  videoSrc = '/images/hero-video.mp4',
  height = 'min-h-[100vh] sm:min-h-[90vh] md:min-h-[85vh] lg:min-h-[80vh]',
  fontFamily = 'Montserrat',
  class: className = '',
  priority = true
} = Astro.props;

const sectionClass = `relative ${height} w-full overflow-hidden bg-gray-100 ${className}`;
const backgroundStyle = `font-family: '${fontFamily}';`;
---

<!-- Preload critical background image -->
{priority && (
  <link rel="preload" as="image" href={backgroundImage} />
)}

<section class={sectionClass} style={backgroundStyle}>
  <!-- Video background -->
  <video 
    class="absolute inset-0 w-full h-full object-cover"
    src={videoSrc}
    autoplay
    muted
    loop
    playsinline
  ></video>
  
  <!-- Fallback background image -->
  {backgroundImage && (
    <div 
      class="absolute inset-0 bg-cover bg-center bg-no-repeat"
      style={`background-image: url('${backgroundImage}'); background-position: center center;`}
    ></div>
  )}
  
  <!-- Content container with proper z-index -->
  <div class="relative z-10 flex flex-col h-full justify-center py-8 sm:py-10 md:py-12 lg:py-16 xl:py-20 px-0">
    <slot />
  </div>
</section>