---
// Resources Page - J Land Contracting
// Content sourced from src/content/pages/resources.md
import { getEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Button from "../components/ui/buttons/Button.astro";
import Container from "../components/ui/layout/Container.astro";
import Section from "../components/ui/layout/Section.astro";
import SectionHeader from "../components/ui/display/SectionHeader.astro";
import Card from "../components/ui/display/Card.astro";
import CardGrid from "../components/ui/display/CardGrid.astro";
import Text from "../components/ui/display/Text.astro";

const page = (await getEntry("pages", "resources"))!;
const {
  title,
  description,
  badge,
  hero_heading,
  hero_heading_accent,
  hero_subtitle,
  cta_primary_text,
  cta_primary_href,
  cta_secondary_text,
  cta_secondary_href,
  trust_indicators,
  blog_section_heading,
  blog_section_subtitle,
  blog_cards,
  science_section_heading,
  science_section_subtitle,
  science_cards,
  science_cta_text,
  science_cta_href,
  tools_section_heading,
  tools_section_subtitle,
  tools_cards,
  bottom_cta_heading,
  bottom_cta_text,
  bottom_cta_buttons,
} = page.data as any;

// Icon mapping for dynamic rendering
const iconMap: Record<string, string> = {
  newspaper: `<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>`,
  tools: `<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>`,
  shield: `<path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>`,
  wind: `<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd"></path>`,
  water: `<path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm9 0a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V6h-1a1 1 0 110-2h1V3a1 1 0 011-1zM3 10a1 1 0 011 1v1h1a1 1 0 110 2H4v1a1 1 0 11-2 0v-1H1a1 1 0 110-2h1v-1a1 1 0 011-1zm13 0a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z" clip-rule="evenodd"></path>`,
  "shield-check": `<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>`,
  home: `<path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2z" clip-rule="evenodd"></path>`,
  calculator: `<path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 100 2h.01a1 1 0 100-2H10zm-4 1a1 1 0 011-1h.01a1 1 0 110 2H7a1 1 0 01-1-1zm1-4a1 1 0 100 2h.01a1 1 0 100-2H7zm2 0a1 1 0 100 2h.01a1 1 0 100-2H9zm2 0a1 1 0 100 2h.01a1 1 0 100-2H11zm0-2a1 1 0 100 2h.01a1 1 0 100-2H11zm-2 0a1 1 0 100 2h.01a1 1 0 100-2H9zm-2 0a1 1 0 100 2h.01a1 1 0 100-2H7zm2-2a1 1 0 100 2h.01a1 1 0 100-2H9zm2 0a1 1 0 100 2h.01a1 1 0 100-2H11z" clip-rule="evenodd"></path>`,
  document: `<path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path>`,
  "clipboard-check": `<path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>`,
  exclamation: `<path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>`,
};
---

<Layout title={title} description={description}>
  <!-- Hero Section -->
  <Section background="dark">
    <Container>
      <div class="text-center max-w-4xl mx-auto">
        <div class="mb-6">
          <div
            class="inline-flex items-center justify-center mb-4 text-white bg-brand-primary px-4 py-2 rounded-full font-semibold"
          >
            {badge}
          </div>
        </div>
        <h1
          class="text-5xl md:text-6xl font-bold text-white mb-6 leading-tight"
        >
          {hero_heading}<br />
          <span class="text-accent-primary">{hero_heading_accent}</span>
        </h1>
        <p class="text-xl text-white mb-8 leading-relaxed">
          {hero_subtitle}
        </p>
        <div
          class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8"
        >
          <Button href={cta_primary_href} variant="primary" size="lg">
            {cta_primary_text}
          </Button>
          <Button
            href={cta_secondary_href}
            variant="primary"
            size="lg"
            class="bg-white text-brand-primary border-white hover:bg-gray-100"
          >
            {cta_secondary_text}
          </Button>
        </div>
        <div class="flex flex-wrap justify-center gap-6 text-sm text-white">
          {
            trust_indicators?.map((indicator: string) => (
              <div class="flex items-center gap-2">
                <svg
                  class="w-5 h-5 text-accent-primary"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span>{indicator}</span>
              </div>
            ))
          }
        </div>
      </div>
    </Container>
  </Section>

  <!-- Blog Section -->
  <Section class="py-16 lg:py-24 bg-background-light">
    <Container>
      <SectionHeader title={blog_section_heading} alignment="center" />
      <Text
        variant="lead"
        color="muted"
        class="text-center max-w-2xl mx-auto mb-8"
      >
        {blog_section_subtitle}
      </Text>

      <CardGrid class="mt-12">
        {
          blog_cards?.map((card: any) => (
            <Card class="group hover:shadow-lg transition-shadow duration-300 h-full">
              <div class="p-8 h-full flex flex-col">
                <div class="mb-4">
                  <svg
                    class="w-8 h-8 text-accent-primary"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <Fragment set:html={iconMap[card.icon]} />
                  </svg>
                </div>
                <h3 class="text-2xl font-bold text-brand-primary mb-4">
                  {card.title}
                </h3>
                <p class="text-brand-secondary mb-6 leading-relaxed flex-grow">
                  {card.description}
                </p>
                <Button
                  variant={card.variant === "primary" ? "primary" : "secondary"}
                  href={card.button_href}
                  class="w-full mt-auto text-center text-sm sm:text-base"
                >
                  {card.button_text}
                </Button>
              </div>
            </Card>
          ))
        }
      </CardGrid>
    </Container>
  </Section>

  <!-- Roofing Science Education Section -->
  <Section class="py-16 lg:py-24">
    <Container>
      <SectionHeader title={science_section_heading} alignment="center" />
      <Text
        variant="lead"
        color="muted"
        class="text-center max-w-3xl mx-auto mb-12"
      >
        {science_section_subtitle}
      </Text>

      <div class="grid md:grid-cols-2 gap-12">
        {
          science_cards?.map((card: any) => (
            <div class="bg-white p-8 rounded-lg shadow-lg">
              <div class="mb-6">
                <svg
                  class="w-12 h-12 text-accent-primary"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <Fragment set:html={iconMap[card.icon]} />
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-brand-primary mb-4">
                {card.title}
              </h3>
              {card.description.split("\n\n").map((p: string) => (
                <p class="text-gray-600 mb-4 leading-relaxed last:mb-0">{p}</p>
              ))}
            </div>
          ))
        }
      </div>

      <div class="text-center mt-12">
        <Button href={science_cta_href} variant="primary" size="lg">
          {science_cta_text}
        </Button>
      </div>
    </Container>
  </Section>

  <!-- Tools Section -->
  <Section class="py-16 lg:py-24">
    <Container>
      <SectionHeader title={tools_section_heading} alignment="center" />
      <Text
        variant="lead"
        color="muted"
        class="text-center max-w-2xl mx-auto mb-8"
      >
        {tools_section_subtitle}
      </Text>

      <CardGrid class="mt-12">
        {
          tools_cards?.map((card: any) => (
            <Card class="group hover:shadow-lg transition-shadow duration-300 h-full">
              <div class="p-8 h-full flex flex-col">
                <div class="mb-4">
                  <svg
                    class="w-8 h-8 text-accent-primary"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <Fragment set:html={iconMap[card.icon]} />
                  </svg>
                </div>
                <h3 class="text-2xl font-bold text-brand-primary mb-4">
                  {card.title}
                </h3>
                <p class="text-brand-secondary mb-6 leading-relaxed flex-grow">
                  {card.description}
                </p>
                <Button
                  variant="secondary"
                  href={card.button_href}
                  class="w-full mt-auto text-center text-sm sm:text-base"
                >
                  {card.button_text}
                </Button>
              </div>
            </Card>
          ))
        }
      </CardGrid>
    </Container>
  </Section>

  <!-- CTA Section -->
  <Section background="dark">
    <Container>
      <div class="text-center max-w-4xl mx-auto">
        <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-6 text-white">
          {bottom_cta_heading}
        </h2>
        <p class="text-xl mb-8 text-white leading-relaxed">
          {bottom_cta_text}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {
            bottom_cta_buttons?.map((btn: any) => (
              <Button
                href={btn.href}
                variant="primary"
                size="lg"
                class={
                  btn.variant === "white"
                    ? "bg-white text-brand-primary border-white hover:bg-gray-100"
                    : ""
                }
              >
                {btn.text}
              </Button>
            ))
          }
        </div>
      </div>
    </Container>
  </Section>
</Layout>
